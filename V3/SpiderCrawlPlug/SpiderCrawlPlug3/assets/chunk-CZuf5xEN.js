import{d as Ce,e as N,o as n,r as p,f as qe,g as H,h,c as u,a as s,i as o,w as ue,j as C,n as f,u as m,k as K,l as y,t as _,m as it,p as l,T as se,v as pe,F as L,q as P,s as ct,b as ut}from"./chunk-BZa7IkcD.js";import{I as pt,a as vt,b as yt,M as Me,A as ft,c as mt}from"./chunk-DBzfZ1E2.js";function ve(z,c){return n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function ye(z,c){return n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule":"evenodd"})])}function re(z,c){return n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{d:"M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"}),s("path",{d:"M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"})])}const gt={key:0},kt={key:0},ht={key:1},_t={key:2},bt={key:3},xt=Ce({__name:"NestedComponent",props:{data:{default:()=>{}},level:{default:0},parentKey:{default:""},darkMode:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},setup(z){const c=z,w=p(c.expanded??!1);qe(()=>{c.level===0&&(w.value=!0)});const R=H(()=>typeof c.data=="object"&&!Array.isArray(c.data)&&c.data!==null&&!(c.data instanceof RegExp)&&!(c.data instanceof Map)&&!(c.data instanceof Set)),F=H(()=>Array.isArray(c.data)),V=H(()=>c.data instanceof RegExp),W=H(()=>c.data instanceof Map),U=H(()=>c.data instanceof Set),fe=H(()=>["string","number","boolean","object","regexp"].includes(typeof c.data)&&c.data!==null),me=H(()=>typeof c.data=="string"?"string-value":typeof c.data=="number"?"number-value":typeof c.data=="boolean"?"boolean-value":c.data===null?"null-value":c.data instanceof Date?"date-value":c.data instanceof RegExp?"regexp-value":"");function E(){w.value=!w.value}function j(){const t=JSON.stringify(c.data,null,2);navigator.clipboard.writeText(t).then(()=>{q.value=!0,setTimeout(()=>q.value=!1,2e3)})}function B(t){const M=c.darkMode?["#e06c75","#e5c07b","#98c379","#56b6c2","#61afef","#c678dd"]:["#d32f2f","#fbc02d","#388e3c","#0288d1","#1976d2","#7b1fa2"];return M[t%M.length]}const q=p(!1),te=H(()=>{if(R.value){const t=Object.keys(c.data);return`{ ${t.slice(0,2).map(M=>`${M}: ${g(c.data[M])}`).join(", ")}${t.length>2?", ...":""} }`}else{if(F.value)return`[${c.data.slice(0,2).map(t=>g(t)).join(", ")}${c.data.length>2?", ...":""}]`;if(W.value){const t=Array.from(c.data.entries());return`Map { ${t.slice(0,2).map(M=>{const[$,A]=M;return`${$}: ${g(A)}`}).join(", ")}${t.length>2?", ...":""} }`}else if(U.value){const t=Array.from(c.data.values());return`Set { ${t.slice(0,2).map(M=>g(M)).join(", ")}${t.length>2?", ...":""} }`}}return""});function g(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?`"${t}"`:typeof t=="number"||typeof t=="boolean"?t:Array.isArray(t)?"[...]":typeof t=="object"?"{...}":t instanceof RegExp?t.toString():t instanceof Date?t.toISOString():String(t)}function ae(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?`"${t}"`:typeof t=="number"||typeof t=="boolean"?t:t instanceof RegExp?t.toString():t instanceof Date?t.toISOString():String(t)}const de=H(()=>c.data instanceof Date);return(t,M)=>{const $=h("NestedComponent",!0);return n(),u("div",{class:f({"json-viewer-dark":t.darkMode&&t.level===0,"json-viewer-light":!t.darkMode&&t.level===0}),style:K({marginLeft:t.level*10+"px",padding:"2px 0"})},[R.value&&!V.value&&!de.value&&!W.value&&!U.value?(n(),u("div",gt,[s("span",{class:"cursor-pointer",onClick:E},[w.value?(n(),N(m(ve),{key:0,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])):C("",!0),w.value?C("",!0):(n(),N(m(ye),{key:1,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])),s("span",{style:K({color:B(t.level)}),class:"type-label key"},[y(_(t.parentKey)+" ",1),t.level!==0?(n(),u("span",kt,":")):C("",!0),M[0]||(M[0]=y(" { "))],4),w.value?C("",!0):(n(),u("span",{key:2,class:f(["preview",{"preview-dark":t.darkMode,"preview-light":!t.darkMode}])},_(te.value),3)),t.level!==0?(n(),u("span",{key:3,style:K({color:B(t.level)}),class:"key key-count margin-lr-5 cursor-pointer"},_(Object.keys(t.data).length)+" ...",5)):C("",!0)]),o(m(re),{class:f(["copy-icon margin-lr-5 cursor-pointer",t.darkMode?"copy-icon-dark":"copy-icon-light"]),onClick:it(j,["stop"])},null,8,["class"]),o(se,{name:"fade"},{default:l(()=>[q.value?(n(),u("span",{key:0,class:f(["copy-tooltip",{"copy-tooltip-dark":t.darkMode,"copy-tooltip-light":!t.darkMode}])},"Copied!",2)):C("",!0)]),_:1}),ue(s("div",{class:f(["node-children",t.darkMode?"node-children-dark":"node-children-light"])},[(n(!0),u(L,null,P(t.data,(A,I)=>(n(),N($,{key:I,darkMode:t.darkMode,data:A,level:t.level+1,parentKey:I,expanded:w.value},null,8,["darkMode","data","level","parentKey","expanded"]))),128))],2),[[pe,w.value]]),s("span",{class:f(["toggle-btn cursor-pointer",t.darkMode?"toggle-btn-dark":"toggle-btn-light"]),onClick:E},"},",2)])):F.value?(n(),u("div",ht,[s("span",{onClick:E,class:"cursor-pointer"},[w.value?(n(),N(m(ve),{key:0,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])):(n(),N(m(ye),{key:1,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])),s("span",{style:K({color:B(t.level)}),class:"key type-label"},[y(_(t.parentKey)+":",1),s("span",{style:K({color:B(t.level)}),class:"key key-count cursor-pointer"}," ["+_(t.data.length)+"]...",5)],4)]),o(m(re),{class:f(["copy-icon margin-lr-5 cursor-pointer",t.darkMode?"copy-icon-dark":"copy-icon-light"]),onClick:j},null,8,["class"]),o(se,{name:"fade"},{default:l(()=>[q.value?(n(),u("span",{key:0,class:f(["copy-tooltip",{"copy-tooltip-dark":t.darkMode,"copy-tooltip-light":!t.darkMode}])},"Copied!",2)):C("",!0)]),_:1}),ue(s("div",{class:f(["node-children",t.darkMode?"node-children-dark":"node-children-light"])},[(n(!0),u(L,null,P(t.data,(A,I)=>(n(),N($,{key:I,darkMode:t.darkMode,data:A,level:t.level+1,parentKey:`${t.parentKey}[${I}]`,expanded:w.value},null,8,["darkMode","data","level","parentKey","expanded"]))),128))],2),[[pe,w.value]])])):W.value?(n(),u("div",_t,[s("span",{onClick:E,class:"cursor-pointer"},[w.value?(n(),N(m(ve),{key:0,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])):(n(),N(m(ye),{key:1,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])),s("span",{style:K({color:B(t.level)}),class:"key type-label"},[y(_(t.parentKey)+": ",1),s("span",{style:K({color:B(t.level)}),class:"key key-count cursor-pointer"}," [Map]",4)],4)]),o(m(re),{class:f(["copy-icon margin-lr-5 cursor-pointer",t.darkMode?"copy-icon-dark":"copy-icon-light"]),onClick:j},null,8,["class"]),o(se,{name:"fade"},{default:l(()=>[q.value?(n(),u("span",{key:0,class:f(["copy-tooltip",{"copy-tooltip-dark":t.darkMode,"copy-tooltip-light":!t.darkMode}])},"Copied!",2)):C("",!0)]),_:1}),ue(s("div",{class:f(["node-children",t.darkMode?"node-children-dark":"node-children-light"])},[(n(!0),u(L,null,P(Array.from(t.data.entries()),(A,I)=>(n(),N($,{key:I,darkMode:t.darkMode,data:A,level:t.level+1,parentKey:I,expanded:w.value},null,8,["darkMode","data","level","parentKey","expanded"]))),128))],2),[[pe,w.value]])])):U.value?(n(),u("div",bt,[s("span",{onClick:E,class:"cursor-pointer"},[w.value?(n(),N(m(ve),{key:0,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])):(n(),N(m(ye),{key:1,class:f([["toggle-btn",t.darkMode?"toggle-btn-dark":"toggle-btn-light","cursor-pointer"],"margin-lr-5 height10 width10"])},null,8,["class"])),s("span",{style:K({color:B(t.level)}),class:"key type-label"},[y(_(t.parentKey)+": ",1),s("span",{style:K({color:B(t.level)}),class:"key key-count cursor-pointer"}," [Set]",4)],4)]),o(m(re),{class:f(["copy-icon margin-lr-5 cursor-pointer",t.darkMode?"copy-icon-dark":"copy-icon-light"]),onClick:j},null,8,["class"]),o(se,{name:"fade"},{default:l(()=>[q.value?(n(),u("span",{key:0,class:f(["copy-tooltip",{"copy-tooltip-dark":t.darkMode,"copy-tooltip-light":!t.darkMode}])},"Copied!",2)):C("",!0)]),_:1}),ue(s("div",{class:f(["node-children",t.darkMode?"node-children-dark":"node-children-light"])},[(n(!0),u(L,null,P(Array.from(t.data.values()),(A,I)=>(n(),N($,{key:I,darkMode:t.darkMode,data:A,level:t.level+1,parentKey:`${t.parentKey}[${I}]`,expanded:w.value},null,8,["darkMode","data","level","parentKey","expanded"]))),128))],2),[[pe,w.value]])])):(n(),u("div",{key:4,class:f(["leaf-node",t.darkMode?"leaf-node-dark":"leaf-node-light"])},[s("span",{onClick:E},[s("span",{class:f(["key",t.darkMode?"key-dark":"key-light"])},_(t.parentKey),3),M[1]||(M[1]=y(": ")),s("span",{class:f(["key",me.value,t.darkMode?"value-dark":"value-light"])},_(ae(t.data)),3)]),fe.value?(n(),N(m(re),{key:0,class:f(["copy-icon margin-lr-5 cursor-pointer",t.darkMode?"copy-icon-dark":"copy-icon-light"]),onClick:j},null,8,["class"])):C("",!0),o(se,{name:"fade"},{default:l(()=>[q.value?(n(),u("span",{key:0,class:f(["copy-tooltip",{"copy-tooltip-dark":t.darkMode,"copy-tooltip-light":!t.darkMode}])},"Copied!",2)):C("",!0)]),_:1})],2))],6)}}}),ee=Ce({__name:"JsonViewer",props:{data:{default:()=>{}},level:{default:0},parentKey:{default:""},darkMode:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},setup(z){return(c,w)=>(n(),N(xt,{darkMode:c.darkMode,data:c.data,level:c.level,expanded:c.expanded},null,8,["darkMode","data","level","expanded"]))}}),wt={class:"items-center text-center text-white font-bold text-base p-3 flex gap-2"},St={key:0},Mt={class:"pt-5 pl-5 pr-5 pb-3 flex justify-between"},Ct={class:"flex gap-2 items-center text-center"},It={class:"flex gap-3 items-center text-center"},Nt={key:0},Dt={class:"flex gap-1 items-center text-center font-bold text-md"},jt={key:0},At=["src"],qt=["innerHTML"],Ot={key:1},Tt={key:1},Vt={class:"flex justify-between"},Bt={class:"mt-5 flex justify-between"},$t={class:"w-[48%]"},Ht={class:"text-left ml-5 w-[48%]"},Jt={class:"flex text-center items-center justify-center p-3"},Kt=["href"],Et={style:{display:"flex","justify-content":"center","align-items":"center","padding-bottom":"5%"}},Lt=["src"],Rt=["innerHTML"],Ft=["innerHTML"],Ut={class:"grid gap-6 max-h-[789px] overflow-y-auto"},Pt={class:"flex text-md font-normal"},zt={class:"w-72"},Wt={class:"min-w-0 flex-1 break-all"},Zt={class:"flex text-md font-normal"},Xt={class:"w-72"},Gt={class:"min-w-0 flex-1 break-all"},Yt={class:"flex text-md font-normal"},Qt={class:"w-72"},ea={class:"min-w-0 flex-1 break-all"},ta={class:"grid gap-5"},aa={key:0},oa={key:1},la={key:0},na={key:0,class:"p-3"},sa=["innerHTML"],ra={key:1,class:"p-10 flex items-center justify-center"},da=["src"],ia=["innerHTML"],ca={class:"max-h-[666px] overflow-y-auto break-all p-3"},ua={class:"grid gap-3"},pa={key:0,class:""},va={key:1},ya=Ce({__name:"Options",setup(z){const c=pt.addFromIconFontCn({src:"../../public/js/icon.js"}),w=p("NetWork"),R=p(!1),F=p(""),V=p([]),W=p(new Set),U=p(!1),fe=[{title:"序号",dataIndex:"index",width:66,slotName:"ind"},{title:"时间",dataIndex:"start",sortable:{sortDirections:["ascend","descend"]},slotName:"start"},{title:"code",dataIndex:"code",slotName:"code",sortable:{sortDirections:["ascend","descend"]}},{title:"method",dataIndex:"method",slotName:"method"},{title:"url",dataIndex:"url",slotName:"url",width:777,ellipsis:!0},{title:"time",dataIndex:"time",slotName:"time"},{title:"size",dataIndex:"Size",slotName:"size"},{title:"type",dataIndex:"type",slotName:"type",filterable:{filters:[{text:"文档",value:"document"},{text:"xhr",value:"xhr"},{text:"stylesheet",value:"stylesheet"},{text:"script",value:"script"},{text:"font",value:"font"},{text:"image",value:"image"}],filter:(a,e)=>e.type.includes(a)}},{title:"version",dataIndex:"version",slotName:"version",width:158}],me=ct({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),E=()=>{chrome.storage.sync.set({spiderSwitch:R.value})},j=p([]),B=(a,e)=>{U.value=a},q=p(2),te=p("SpiderCrawlData");p("NetWork"),p("Header");const g=p({header:{},payload:{},response:{content:{mimeType:""},text:""},cookie:{response:{},request:{}}});p({general:!0,request:!0,response:!0,payload:!0,reqPayload:!0,cookie:!0,reqCookie:!0});const ae=p(""),de=p(""),t=p(""),M=p(""),$=p(""),A=p({a:"请输入字符串..."});p("ToolBoxFormat");const I=p("Cookie"),Z=p(""),k=p(""),Oe=p({all:{value:!0,label:"all"},xhr:{value:!1,label:"xhr"},doc:{value:!1,label:"doc"},css:{value:!1,label:"css"},js:{value:!1,label:"Js"},img:{value:!1,label:"Img"},media:{value:!1,label:"Media"},manifest:{value:!1,label:"Manifest"},ws:{value:!1,label:"WS"},wasm:{value:!1,label:"Wasm"},other:{value:!1,label:"Other"}}),Te=p("");p(null),p(!0),p(!0),p(!1),p(["Xhr","Doc","Css","Js","Img","Media","Manifest","WS","Wasm","Other"]),p(["Xhr","Doc","Css","Js","Img","Media","Manifest","WS","Wasm","Other"]);const ge=p([]);p([]);const Ne=p([]),De=async()=>{ge.value=[];const a=indexedDB.open(te.value,q.value);a.onupgradeneeded=e=>{const i=e.target.result;i.objectStoreNames.contains("myDataStore")||i.createObjectStore("myDataStore",{keyPath:"id",autoIncrement:!0})},a.onsuccess=e=>{const v=e.target.result.transaction("myDataStore","readwrite").objectStore("myDataStore");var x=null;x=v.openCursor(),x.onsuccess=function(S){const b=S.target.result;b?(W.value.has(b.value.id)||(Ve(b),W.value.add(b.value.id)),b.continue()):console.log("数据加载完成")},x.onerror=function(S){console.error("读取数据时发生错误:",S.target.errorCode)}},a.onerror=e=>{console.error("Error opening database:",e.target.error)}},Ve=a=>{let e={};const i=JSON.stringify(a.value),r=a.value.id,v=a.value.content,x=a.value.request.url,S=Ge(a.value.timestamp),b=parseInt(a.value.time),O=a.value._resourceType,le=a.value.request.httpVersion,ne=a.value.response.status,T=a.value.request.method,he=a.value.response.content.size;var G="";try{G=a.value.request.postData.text}catch{}e={id:r,start:S,code:ne,method:T,url:x,time:b,Size:he,type:O,version:le,bodydata:G,content:v},Ne.value.includes(O)||Ne.value.push(O);const _e=Oe.value.all.value,Y=Te.value.trim();_e?Y?i.includes(Y)&&V.value.push(e):V.value.push(e):(console.log(O,ge.value),ge.value.includes(O)&&(Y?i.includes(Y)&&V.value.push(e):V.value.push(e)))},Be=async a=>{const e=indexedDB.open(te.value,q.value);e.onupgradeneeded=function(i){const r=i.target.result;r.objectStoreNames.contains("myDataStore")||r.createObjectStore("myDataStore",{keyPath:"id",autoIncrement:!0})},e.onsuccess=function(i){const r=i.target.result,v=r.transaction("myDataStore","readwrite"),S=v.objectStore("myDataStore").delete(Number(a));S.onsuccess=function(b){console.log("Item deleted successfully")},S.onerror=function(b){console.error("Delete error:",b)},v.oncomplete=function(){r.close()},v.onerror=function(b){console.error("Transaction error:",b)}},e.onerror=function(i){console.error("打开IndexedDB时发生错误:",i.target.errorCode)}},$e=async()=>{j.value.length>0&&Object.values(j.value).forEach(a=>{console.log(a),Be(a),V.value=V.value.filter(e=>e.id!==a)})},He=async()=>{chrome.storage.sync.get(["spiderSwitch"],a=>{R.value=a.spiderSwitch})},Je=(a,e)=>{try{var i=window.atob(a);const r=i.length,v=new Uint8Array(r);for(let x=0;x<r;x++)v[x]=i.charCodeAt(x);return new Blob([v],{type:e})}catch{return Ke(a,e)}},Ke=(a,e)=>new Blob([a],{type:e}),Ee=()=>{console.log(M);try{var a=Je(M.value,"application/pdf"),e=URL.createObjectURL(a)}catch{e=""}ae.value=e};p(""),qe(()=>{He(),De()});const je=a=>{w.value=a,console.log(w.value)},Le=(a,e)=>{const i=indexedDB.open(te.value,q.value);i.onupgradeneeded=function(r){const v=r.target.result;v.objectStoreNames.contains("myDataStore")||v.createObjectStore("myDataStore",{keyPath:"id",autoIncrement:!0})},i.onsuccess=function(r){const b=r.target.result.transaction("myDataStore","readonly").objectStore("myDataStore").get(a);b.onsuccess=function(){b.result?e(b.result):(console.log("No data found with id: ",a),e(null))},b.onerror=function(O){console.error("Error occurred while retrieving data: ",O.target.errorCode)}},i.onerror=function(r){console.error("Error opening database: ",r.target.errorCode)}},Re=a=>{Le(a.id,Fe)},Fe=a=>{let e;const i={URL:a.request.url,Method:a.request.method,Code:a.response.status,Address:a.serverIPAddress},r=a.response.content,v=a.response.headers,x=a.request.headers,S=a.request.queryString,b={general:i,request:x,response:v};try{e=a.request.postData}catch{e=null}const O={query:S,postData:e},le={content:r,text:a.content},ne={request:a.request.cookies,response:a.response.cookies};g.value={header:b,payload:O,response:le,cookie:ne,request:a.request},console.log(g.value),oe.value=!0},Ue=a=>{const e=I.value,i={};if(a){if(e==="Cookie")try{try{const r=JSON.parse(a);Array.isArray(r)?(r.forEach(v=>{i[v.name]=v.value}),k.value=i):k.value="格式错误"}catch{Z.value.split(";").forEach(v=>{const[x,S]=v.trim().split("=");i[x]=S}),k.value=i}}catch(r){console.error("无法解析输入的 JSON 字符串",r),k.value="格式错误"}if(e==="Header"){const r=a.replaceAll(`:
`,":").replaceAll(`：
`,":");console.log(r),r.split(`
`).forEach(v=>{const[x,S]=v.replace(":","&&&").split("&&&");i[x]=S}),k.value=i}if(e==="JSon")try{const r=JSON.parse(a);k.value=r}catch(r){console.log(r),k.value=""}}else k.value="";k.value=JSON.stringify(k.value,null,2),console.log("FormatOutput",a,k.value)},Pe=()=>{const a=Z.value;console.log("input",a,Z.value);const e=I.value,i={};if(a){if(e==="Cookie")try{try{const r=JSON.parse(a);Array.isArray(r)?(r.forEach(v=>{i[v.name]=v.value}),k.value=i):k.value="格式错误"}catch{Z.value.split(";").forEach(v=>{const[x,S]=v.trim().split("=");i[x]=S}),k.value=i}}catch(r){console.error("无法解析输入的 JSON 字符串",r),k.value="格式错误"}if(e==="Header"){const r=a.replaceAll(`:
`,":").replaceAll(`：
`,":");console.log(r),r.split(`
`).forEach(v=>{const[x,S]=v.replace(":","&&&").split("&&&");i[x]=S}),k.value=i}if(e==="JSon")try{const r=JSON.parse(a);k.value=r}catch(r){console.log(r),k.value=""}}else k.value="";k.value=JSON.stringify(k.value,null,2),console.log("FormatOutput",a,k.value)},ze=()=>{const a=document.createElement("textarea");a.value=k.value,Object.entries(k.value).map(([e,i])=>`${e}=${i}`).join("; "),document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),Me.success("已复制到剪贴板")},We=()=>{const a=document.createElement("textarea"),e=Object.entries(JSON.parse(k.value)).map(([i,r])=>`${i}=${r}`).join("; ");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),Me.success("已复制到剪贴板")},Ze=()=>{const a=document.createElement("textarea");a.value=k.value,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),Me.success("已复制到剪贴板")},Xe=()=>{de.value=curlToPy(t.value)},Ge=a=>{a=Number(a);var e=new Date(a).toISOString(),i=e.slice(10,-5).replace(/T/," ");return i},Ye=a=>{const e=a.code;return e>=200&&e<300?"green":e>=300&&e<400?"blue":e>=400&&e<500?"orange":e>=500&&e<600?"red":"gray"},Qe=a=>{const e=a.time||0;return e>1e3?String((e/1e3).toFixed(2))+" s":String(e)+" ms"},et=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(2)+" KB":a<1024*1024*1024?(a/(1024*1024)).toFixed(2)+" MB":(a/(1024*1024*1024)).toFixed(2)+" GB",tt=a=>{a||(a={}),a=a.type;const e=String(a);return{document:"icon-documents",stylesheet:"icon-Stylesheet",image:"icon-image",font:"icon-font",script:"icon-script"}[e]||"icon-weizhigeshi"},at=H(()=>F.value?V.value.filter(a=>JSON.stringify(a).includes(F.value.trim())):V.value),oe=p(!1),ot=()=>{oe.value=!1},lt=()=>{oe.value=!1},ke=a=>{const e={};return a?(a.forEach(i=>{const r=i.name,v=i.value;e[r]=v}),JSON.stringify(e)):e},X=a=>{try{a=JSON.parse(a)}catch{}return console.log(a),a};return(a,e)=>{const i=h("a-menu-item"),r=h("a-menu"),v=h("a-layout-sider"),x=h("a-switch"),S=h("icon-delete"),b=h("a-button"),O=h("icon-refresh"),le=h("a-input-search"),ne=h("a-layout-header"),T=h("a-tag"),he=h("a-table"),G=h("a-option"),_e=h("a-select"),Y=h("a-space"),ie=h("a-textarea"),J=h("a-tab-pane"),ce=h("a-col"),be=h("a-row"),nt=h("a-card"),Ae=h("a-tabs"),st=h("a-layout-content"),rt=h("a-layout-footer"),xe=h("a-layout"),we=h("a-collapse-item"),Se=h("a-collapse"),dt=h("a-modal");return n(),u(L,null,[o(xe,{class:"h-[100vh]"},{default:l(()=>[o(v,{theme:"dark",breakpoint:"lg",width:220,collapsible:"",collapsed:U.value,onCollapse:B},{default:l(()=>[s("div",wt,[o(m(c),{type:"icon-wangluozhuabao",size:20}),U.value?C("",!0):(n(),u("div",St," SpiderCrawlPlug "))]),o(r,{defaultOpenKeys:["1"],defaultSelectedKeys:["1"]},{default:l(()=>[o(i,{key:"1",onClick:e[0]||(e[0]=d=>je("NetWork"))},{default:l(()=>[o(m(vt)),e[11]||(e[11]=y(" 抓包 ",-1))]),_:1}),o(i,{key:"2",onClick:e[1]||(e[1]=d=>je("Tool"))},{default:l(()=>[o(m(yt)),e[12]||(e[12]=y(" 工具箱 ",-1))]),_:1})]),_:1})]),_:1},8,["collapsed"]),o(xe,null,{default:l(()=>[o(ne,null,{default:l(()=>[s("div",Mt,[s("div",Ct,[e[13]||(e[13]=s("div",{class:"text-md font-bold flex gap-2 items-center"}," 监听 ",-1)),o(x,{type:"round","model-value":R.value,"onUpdate:modelValue":e[2]||(e[2]=d=>R.value=d),onClick:E},null,8,["model-value"])]),s("div",It,[j.value.length>0?(n(),N(b,{key:0,type:"primary",status:"danger",onClick:$e},{icon:l(()=>[o(S)]),default:l(()=>[y(" 删除 "+_(j.value.length)+" 个 ",1)]),_:1})):C("",!0),o(b,{type:"primary",onClick:De},{icon:l(()=>[o(O)]),default:l(()=>[e[14]||(e[14]=y(" 刷新 ",-1))]),_:1}),o(le,{placeholder:"输入搜索关键字","search-button":"",modelValue:F.value,"onUpdate:modelValue":e[3]||(e[3]=d=>F.value=d)},null,8,["modelValue"])])])]),_:1}),o(xe,null,{default:l(()=>[o(st,{class:"pr-5 pl-5"},{default:l(()=>[w.value==="NetWork"?(n(),u("div",Nt,[o(he,{"row-key":"id",columns:fe,data:at.value,"row-selection":me,pagination:!1,"sticky-header":.1,selectedKeys:j.value,"onUpdate:selectedKeys":e[4]||(e[4]=d=>j.value=d)},{code:l(({record:d,rowIndex:D})=>[s("div",Dt,[o(m(c),{type:tt(d),size:18},null,8,["type"]),o(T,{color:Ye(d)},{default:l(()=>[y(_(d.code),1)]),_:2},1032,["color"])])]),start:l(({record:d,rowIndex:D})=>[o(T,{color:"arcoblue"},{default:l(()=>[y(_(d.start),1)]),_:2},1024)]),url:l(({record:d,rowIndex:D})=>[o(T,{color:"blue",onClick:Q=>Re(d)},{default:l(()=>[y(_(d.url),1)]),_:2},1032,["onClick"])]),method:l(({record:d,rowIndex:D})=>[o(T,{color:"cyan"},{default:l(()=>[y(_(d.method),1)]),_:2},1024)]),ind:l(({record:d,rowIndex:D})=>[o(T,null,{default:l(()=>[y(_(D+1),1)]),_:2},1024)]),time:l(({record:d,rowIndex:D})=>[o(T,null,{default:l(()=>[y(_(Qe(d)),1)]),_:2},1024)]),size:l(({record:d,rowIndex:D})=>[o(T,null,{default:l(()=>[y(_(et(d.Size)),1)]),_:2},1024)]),type:l(({record:d,rowIndex:D})=>[d.type=="image"?(n(),u("div",jt,[d.content&&!d.content.startsWith("<?xml")?(n(),u("img",{key:0,style:{"max-width":"80px","max-height":"100px"},src:`data:image/png;base64,${d.content}`,alt:"Base64 Image"},null,8,At)):(n(),u("div",{key:1,style:{"max-width":"80px"},innerHTML:d.content},null,8,qt))])):(n(),u("div",Ot,[o(T,null,{default:l(()=>[y(_(d.type),1)]),_:2},1024)]))]),version:l(({record:d,rowIndex:D})=>[o(T,null,{default:l(()=>[y(_(d.version),1)]),_:2},1024)]),_:1},8,["data","row-selection","selectedKeys"])])):(n(),u("div",Tt,[o(Ae,null,{default:l(()=>[o(J,{key:"ToolBoxFormat",title:"cookie格式化"},{default:l(()=>[s("div",Vt,[o(_e,{style:{width:"320px"},modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=d=>I.value=d),placeholder:"格式化类型",onChange:Pe},{default:l(()=>[o(G,{value:"Cookie"},{default:l(()=>[...e[15]||(e[15]=[y("Cookie",-1)])]),_:1}),o(G,{value:"Header"},{default:l(()=>[...e[16]||(e[16]=[y("Header",-1)])]),_:1}),o(G,{value:"JSon"},{default:l(()=>[...e[17]||(e[17]=[y("JSon",-1)])]),_:1})]),_:1},8,["modelValue"]),o(Y,null,{default:l(()=>[o(b,{type:"primary",onClick:ze},{default:l(()=>[...e[18]||(e[18]=[y("复制 JSON",-1)])]),_:1}),o(b,{type:"primary",onClick:We},{default:l(()=>[...e[19]||(e[19]=[y("复制 字符串",-1)])]),_:1}),o(b,{type:"primary",onClick:Ze},{default:l(()=>[...e[20]||(e[20]=[y("压缩",-1)])]),_:1})]),_:1})]),s("div",Bt,[s("div",$t,[o(ie,{"model-value":Z.value,"onUpdate:modelValue":e[6]||(e[6]=d=>Z.value=d),placeholder:A.value.a,"auto-size":{minRows:23,maxRows:23},"allow-clear":"",onInput:Ue},null,8,["model-value","placeholder"])]),s("div",Ht,[o(m(ee),{data:X(k.value),darkMode:!0,class:"break-all max-h-[688px] overflow-y-auto w-full"},null,8,["data"])])])]),_:1}),o(J,{key:"ToolBoxPdf",title:"pdf预览"},{default:l(()=>[o(be,{justify:"center"},{default:l(()=>[o(ce,{span:22},{default:l(()=>[o(ie,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=d=>M.value=d),placeholder:"请输入base64字符","auto-size":{minRows:2,maxRows:8},"allow-clear":"",onInput:Ee},null,8,["modelValue"]),s("div",Jt,[s("a",{href:ae.value,target:"_blank"},"点击此处全屏查看",8,Kt)])]),_:1})]),_:1}),s("div",Et,[s("iframe",{src:ae.value,width:"90%",height:"700vh",frameborder:"0"},null,8,Lt)])]),_:1}),o(J,{key:"ToolBoxHtml",title:"Html预览"},{default:l(()=>[o(be,{justify:"center"},{default:l(()=>[o(ce,{span:22},{default:l(()=>[o(ie,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=d=>$.value=d),placeholder:"请输入Html字符","auto-size":{minRows:5,maxRows:15},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),o(nt,{class:"max-h-[666px] overflow-y-auto m-5"},{default:l(()=>[s("div",{style:{width:"99%"},innerHTML:$.value},null,8,Rt)]),_:1})]),_:1}),o(J,{key:"ToolBoxCurl",title:"在线curl"},{default:l(()=>[o(be,{style:{height:"calc(90vh - 5%)",paddingTop:"20px"}},{default:l(()=>[o(ce,{span:12},{default:l(()=>[o(ie,{modelValue:t.value,"onUpdate:modelValue":e[9]||(e[9]=d=>t.value=d),placeholder:A.value.a,rows:23,"allow-clear":"",onInput:Xe},null,8,["modelValue","placeholder"])]),_:1}),o(ce,{span:12,style:{"overflow-y":"auto"}},{default:l(()=>[s("div",{class:"output",innerHTML:de.value},null,8,Ft)]),_:1})]),_:1})]),_:1})]),_:1})]))]),_:1}),o(rt)]),_:1})]),_:1})]),_:1}),o(dt,{visible:oe.value,"onUpdate:visible":e[10]||(e[10]=d=>oe.value=d),onOk:ot,onCancel:lt,footer:!1,closable:!1,width:"66%"},{default:l(()=>[o(Ae,{style:{height:"auto","max-height":"88%","min-height":"333px"}},{default:l(()=>[o(J,{key:"1"},{title:l(()=>[o(m(c),{type:"icon-icon-qingqiutou"}),e[21]||(e[21]=y(" Header ",-1))]),default:l(()=>[s("div",Ut,[o(Se,{"default-active-key":["1"],bordered:!1},{default:l(()=>[o(we,{header:"常规",key:"1"},{default:l(()=>[(n(!0),u(L,null,P(g.value.header.general,(d,D,Q)=>(n(),u("div",{key:Q},[s("div",Pt,[s("div",zt,_(D),1),s("div",Wt,_(d),1)])]))),128))]),_:1})]),_:1}),o(Se,{"default-active-key":["1"],bordered:!1},{default:l(()=>[o(we,{header:"响应标头",key:"1"},{default:l(()=>[(n(!0),u(L,null,P(g.value.header.response,(d,D,Q)=>(n(),u("div",{key:Q},[s("div",Zt,[s("div",Xt,_(d.name),1),s("div",Gt,_(d.value),1)])]))),128))]),_:1})]),_:1}),o(Se,{"default-active-key":["1"],bordered:!1},{default:l(()=>[o(we,{header:"请求标头",key:"1"},{default:l(()=>[(n(!0),u(L,null,P(g.value.header.request,(d,D,Q)=>(n(),u("div",{key:Q},[s("div",Yt,[s("div",Qt,_(d.name),1),s("div",ea,_(d.value),1)])]))),128))]),_:1})]),_:1})])]),_:1}),o(J,{key:"2"},{title:l(()=>[o(m(c),{type:"icon-qingqiucanshu"}),e[22]||(e[22]=y(" Payload ",-1))]),default:l(()=>[s("div",ta,[JSON.stringify(g.value.payload.query)!="[]"?(n(),u("div",aa,[e[23]||(e[23]=s("div",{class:"text-md font-bold pb-1"},"URL参数",-1)),o(m(ee),{data:X(ke(g.value.payload.query)),darkMode:!0,class:"break-all max-h-[388px] overflow-y-auto"},null,8,["data"])])):C("",!0),g.value.payload.postData?(n(),u("div",oa,[e[24]||(e[24]=s("div",{class:"text-md font-bold text-blue-600 pb-1"},"请求参数",-1)),o(m(ee),{data:X(g.value.payload.postData.text),darkMode:!0,class:"break-all max-h-[388px] overflow-y-auto"},null,8,["data"])])):C("",!0)])]),_:1}),o(J,{key:"3"},{title:l(()=>[o(m(c),{type:"icon-yulan"}),e[25]||(e[25]=y(" Preview ",-1))]),default:l(()=>[s("div",null,[g.value.response.content.mimeType.includes("image")?(n(),u("div",ra,[g.value.response.text&&!g.value.response.text.startsWith("<?xml")?(n(),u("img",{key:0,class:"items-center text-center",style:{"min-width":"6vw","min-height":"6vh","max-width":"50vw","max-height":"50vh"},src:`data:image/png;base64,${g.value.response.text}`,alt:"Base64 Image"},null,8,da)):(n(),u("div",{key:1,style:{"max-width":"80%"},innerHTML:g.value.response.text},null,8,ia))])):(n(),u("div",la,[g.value.response.content.mimeType.includes("application/json")?(n(),u("div",na,[o(m(ee),{data:X(g.value.response.text),darkMode:!0,class:"break-all max-h-[688px] overflow-y-auto"},null,8,["data"])])):(n(),u("div",{key:1,innerHTML:g.value.response.text,class:"max-h-[666px] overflow-y-auto break-all"},null,8,sa))]))])]),_:1}),o(J,{key:"4"},{title:l(()=>[o(m(c),{type:"icon-xiangying"}),e[26]||(e[26]=y(" Response ",-1))]),default:l(()=>[s("div",ca,_(g.value.response.text),1)]),_:1}),o(J,{key:"5"},{title:l(()=>[o(m(c),{type:"icon--cookie"}),e[27]||(e[27]=y(" cookie ",-1))]),default:l(()=>[s("div",ua,[g.value.cookie.request.length>0?(n(),u("div",pa,[e[28]||(e[28]=s("div",{class:"text-md font-bold pb-1"},"请求Cookie",-1)),o(m(ee),{data:X(ke(g.value.cookie.request)),darkMode:!0,class:"break-all max-h-[388px] overflow-y-auto"},null,8,["data"])])):C("",!0),g.value.cookie.response.length>0?(n(),u("div",va,[e[29]||(e[29]=s("div",{class:"text-md font-bold pb-1 text-yellow-600"},"响应Cookie",-1)),o(m(ee),{data:X(ke(g.value.cookie.response)),darkMode:!0,class:"break-all max-h-[388px] overflow-y-auto"},null,8,["data"])])):C("",!0)])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}}),Ie=ut(ya);Ie.use(ft);Ie.use(mt);Ie.mount("#app");
